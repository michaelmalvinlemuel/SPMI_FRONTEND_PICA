
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Project</h1>
        </div>
        
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <form name="ProjectForm" role="form" novalidate>


	                <div class="panel-body">
	                    <div class="row">
	                        <div class="col-md-6">
                              
                                    <div class="panel panel-default">
                                        <div class="panel-heading clearfix">
                                            <div class="panel-title pull-left">
                                                <h4>Informasi Project</h4>
                                            </div>
                                        </div>
                                        
                                        <div class="panel-body">
                                            <div class="row">
                                                <div ng-if="!vm.canModifyProject" class="col-md-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Nama Project</label><br/>
                                                        {{ vm.input.name }}
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Deskripsi Project</label><br/>
                                                        {{ vm.input.description }}
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Periode</label><br/>
                                                        {{ vm.input.start | date: 'dd-MM-yyyy' }}&nbsp;s/d&nbsp;{{ vm.input.ended | date: 'dd-MM-yyyy' }}
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label class="control-label">Project Assessment Type</label><br/>
                                                        {{ (vm.input.type == 'f') ? 'Full Assessment' : 'Partial Assessment' }}
                                                    </div>
                                                    
                                                </div>
                                            
                                                <div ng-if="vm.canModifyProject" class="col-md-12">
                                                    <div class="form-group has-feedback"
                                                        ng-class="{
                                                            'has-error': ProjectForm.name.$invalid && ProjectForm.name.$dirty }">
                                                        <label class="control-label">Nama Project</label>&nbsp;<label style="color: #a94442;">*</label>
                                                        <input type="text" name="name" class="form-control" ng-model="vm.input.name" ng-required="true" ng-pattern="/^[a-zA-Z0-9()., -#()&/-]*$/">
                                                        <span style="right: 10px;" class="form-control-feedback" 
                                                            ng-show="ProjectForm.name.$dirty" aria-hidden="true">
                                                            <i class="fa" ng-class="{ 
                                                                'fa-close fa-lg': ProjectForm.name.$invalid && ProjectForm.name.$invalid }"></i>
                                                        </span>
                                                        <div style="color: #a94442;" ng-messages="ProjectForm.name.$error" ng-if="ProjectForm.name.$dirty">
                                                            <small ng-message="required">* Nama Project harus diisi.</small>
                                                            <small ng-message="pattern">* Nama Project harus sesuai dengan format yang tepat.</small>
                                                        </div>
                                                    </div>
                                                    <div class="form-group has-feedback"
                                                        ng-class="{
                                                            'has-error': ProjectForm.description.$invalid && ProjectForm.description.$dirty }">
                                                        <label class="control-label">Deskripsi Project</label>&nbsp;<label style="color: #a94442;">*</label>
                                                        <textarea name="description" class="form-control" ng-model="vm.input.description" ng-required="true"></textarea>
                                                        <span style="right: 10px;" class="form-control-feedback" 
                                                            ng-show="ProjectForm.description.$dirty" aria-hidden="true">
                                                            <i class="fa" ng-class="{ 
                                                                'fa-close fa-lg': ProjectForm.description.$invalid && ProjectForm.description.$invalid }"></i>
                                                        </span>
                                                        <div style="color: #a94442;" ng-messages="ProjectForm.description.$error" maxlength="255" ng-if="ProjectForm.description.$dirty">
                                                            <small ng-message="required">* Deskripsi Project harus diisi.</small>
                                                            <small ng-message="maxlength">* Deskripsi Project tidak lebih dari 255 karakter.</small>
                                                        </div>
                                                    </div>
                                                    <div class="form-group has-feedback"
                                                        ng-class="{
                                                            'has-error': ProjectForm.start.$invalid && ProjectForm.start.$dirty }">
                                                        <label class="control-label">Berlaku Mulai</label>&nbsp;<label style="color: #a94442;">*</label>
                                                        <p class="input-group">
                                                            <input type="date" name="start" class="form-control" datepicker-popup 
                                                                ng-model="vm.input.start" is-open="vm.datePickerStatus.openedStart" min-date="vm.minDateStart" 
                                                                datepicker-options="vm.dateOptions" ng-change="vm.pickStart()" ng-required="true" close-text="Close" />
                                                            <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default" ng-click="vm.openStart($event)">
                                                                    <i class="glyphicon glyphicon-calendar"></i>
                                                                </button>
                                                            </span>
                                                        </p>
                                                    </div>
                                                
        
                                                    <div class="form-group has-feedback"
                                                        ng-class="{
                                                            'has-error': ProjectForm.ended.$invalid && ProjectForm.ended.$dirty }">
                                                        <label class="control-label">Berakhir hingga</label>&nbsp;<label style="color: #a94442;">*</label>
                                                        <p class="input-group">
                                                            <input type="date" name="ended" class="form-control" datepicker-popup 
                                                                ng-model="vm.input.ended" is-open="vm.datePickerStatus.openedEnded" min-date="vm.input.start" 
                                                                datepicker-options="vm.dateOptions" ng-required="true" close-text="Close" />
                                                            <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default" ng-click="vm.openEnded($event)">
                                                                    <i class="glyphicon glyphicon-calendar"></i>
                                                                </button>
                                                            </span>
                                                        </p>
                                                    </div>
                                                    
                                                    <div class="form-group has-feedback" style="padding-top: 6px; padding-bottom: 6px;"
                                                        ng-class="{ 'has-error': !vm.input.type && ProjectForm.type.$dirty }">
                                                        <label class="control-label">Project Assessment Type</label>&nbsp;<label style="color: #a94442;">*</label><br/>
                                                        <label class="radio-inline"><input type="radio" ng-required="true" name="type" ng-model="vm.input.type" value="f">Full Assessment</label>
                                                        <label class="radio-inline"><input type="radio" ng-required="true" name="type" ng-model="vm.input.type" value="p">Partial Assessment</label>
                                                        <span class="form-control-feedback" 
                                                            ng-show="ProjectForm.type.$dirty" aria-hidden="true">
                                                            <i class="fa" ng-class="{ 
                                                                'fa-close fa-lg': !vm.input.type && ProjectForm.type.$dirty }"></i>
                                                        </span><br/>
                                                        <small style="color: #a94442;"  ng-show="!vm.input.type && ProjectForm.type.$dirty">* Project assessment type is required.</small>
                                                    </div>
                                                    
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div ng-if="vm.showAllocation">
                                        <div class="panel panel-default">
                                            <div class="panel-heading clearfix">
                                                <div class="panel-title pull-left">
                                                    <h4>Resource Allocation</h4>
                                                </div>
                                            </div>
            
                                            <div class="panel-body">
                                                <canvas id="doughnut" class="chart chart-doughnut"
                                                    chart-data="vm.data" chart-labels="vm.label" chart-legend="true">
                                                </canvas> 
                                            </div>
                                        </div>
                                    </div>
                               
	                        </div>
	
	                        <div class="col-md-6">
                         
                                    <div class="panel panel-default">
                                        <div class="panel-heading clearfix">
                                            <div class="panel-title pull-left">
                                                <h4>Project Members</h4>
                                            </div>
                                            <div class="panel-title pull-right" ng-if="vm.canAddMember">
                                                <button ng-click="vm.addProjectMember()" class="btn btn-primary" popover="Add New Members" popover-trigger="mouseenter"><i class="fa fa-user-plus"></i></button>
                                            </div>
                                        </div>
        
                                        <div class="panel-body">
                                            <div class="table-responsive">
                                                <table class="table table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th><a href="" ng-click="sortField = 'nama'     ; reverse = !reverse">*</a></th>
                                                            <th><a href="" ng-click="sortField = 'start'    ; reverse = !reverse">Nama</a></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="object in vm.users | filter:query | orderBy:sortField:reverse track by $index">
                                                            <td>{{ $index + 1 }}</td>
                                                            <td>
                                                                <a ng-if="vm.canChangeLeader" href="" ng-click="vm.setLeader(object)">
                                                                    <i class="fa" ng-class="{
                                                                        'fa-star-o': object.leader == false,
                                                                        'fa-star': object.leader == true}">
                                                                    </i>
                                                                </a>
                                                                <a ng-if="!vm.canChangeLeader">
                                                                    <i class="fa" ng-class="{
                                                                        'fa-star-o': object.leader == false,
                                                                        'fa-star': object.leader == true}">
                                                                    </i>
                                                                </a>
                                                            </td>
                                                            <td>{{ object.name }}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div><!-- close panel body project member -->
                                    </div><!-- close panel project member -->
                                    
                                    <!-- panel project projet Assessor -->
                                    <div class="panel panel-default">
                                        <div class="panel-heading clearfix">
                                            <div class="panel-title pull-left">
                                                <h4>Project Assessors</h4>
                                            </div>
                                            
                                            <div class="panel-title pull-right" ng-if="vm.canAddMember">
                                                <button ng-click="vm.addProjectAssessor()" class="btn btn-primary" popover="Add New Assessors" popover-trigger="mouseenter"><i class="fa fa-user-plus"></i></button>
                                            </div>
                                        </div>
        
                                        <div class="panel-body">
                                            <div class="table-responsive">
                                                <table class="table table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th><a href="" ng-click="sortField = 'start'    ; reverse = !reverse">Nama</a></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="object in vm.assessors | filter:query | orderBy:sortField:reverse track by $index">
                                                            <td>{{ $index + 1 }}</td>
                                                            <td>{{ object.name }}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div><!-- close panel body project member -->
                                    </div><!-- close panel project member -->
                         
	                        </div>
                            
                            
                            
                            
	                   </div>
                       
                       <div class="row">
	                        <div class="col-md-12">
                                <div>
                                    <button class="btn" ng-if="vm.showStatus" ng-class="{
                                        'btn-warning': vm.status.code == '0',
                                        'btn-default': vm.status.code == '1',
                                        'btn-info': vm.status.code == '2',
                                        'btn-primary': vm.status.code == '3',
                                        'btn-success': vm.status.code == '4',
                                        'btn-danger': vm.status.code == '5'}">
                                        {{ vm.status.text }}
                                    </button>&nbsp;
                                    <button ng-if="vm.input.score" class="btn" ng-class="{
                                        'btn-success': vm.input.score >= 3.5,
                                        'btn-primary': vm.input.score < 3.5 && vm.input.score >= 2.5,
                                        'btn-warning': vm.input.score < 2.5 && vm.input.score >= 1.5,
                                        'btn-danger': vm.input.score < 1.5 }">{{ vm.input.score | number : 2 }}
                                    </button>&nbsp;
                                    <button class="btn btn-warning" ng-if="vm.showLock" ng-click="vm.lock()">
                                        <i class="fa" ng-class="{
                                            'fa-lock': vm.input.lock == 1,
                                            'fa-unlock-alt': vm.input.lock == 0 }"></i>
                                    </button>
                                </div>
                                
	                           <node-list ng-model="vm.projects" users="vm.users" assessors="vm.assessors" setting="vm.setting" node-controller="NodeProjectController"></node-list>
	                        </div>
	                    </div>
	                    <hr/>
                        
	                    <strong ng-if="vm.msg.general.length" style="color: #a94442;">Error General({{ vm.msg.general.length }}):</strong>
	                    <ul ng-repeat="errGeneral in vm.msg.general track by $index">
	                        <li><small style="color: #a94442;">{{ errGeneral }}</small></li>
	                    </ul>
                        
                        <strong ng-if="vm.msg.noChild.length" style="color: #a94442;">Error No Child({{ vm.msg.noChild.length }}):</strong>
	                    <ul ng-repeat="errNoChild in vm.msg.noChild track by $index">
	                        <li><small style="color: #a94442;">{{ errNoChild }}</small></li>
	                    </ul>
                        
                        <strong ng-if="vm.msg.noForm.length" style="color: #a94442;">Error No Form({{ vm.msg.noForm.length }}):</strong>
	                    <ul ng-repeat="errNoForm in vm.msg.noForm track by $index">
	                        <li><small style="color: #a94442;">{{ errNoForm }}</small></li>
	                    </ul>
                        
                        <strong ng-if="vm.msg.noWeight.length" style="color: #a94442;">Error No Weight({{ vm.msg.noWeight.length }}):</strong>
	                    <ul ng-repeat="errNoWeight in vm.msg.noWeight track by $index">
	                        <li><small style="color: #a94442;">{{ errNoWeight }}</small></li>
	                    </ul>
	
	                </div>
	
	
	                
	                <div class="panel-footer clearfix">
	                    <div class="panel-title pull-right">
	                        <div class="form-inline">
	                            <button ng-click="vm.back()" class="btn btn-default"><i class="fa fa-undo"></i></button>
                                <button ng-if="vm.hasCheckpoint" class="btn btn-warning" ng-click="vm.checkpoint()" ng-disabled="validated && (SemesterForm.$invalid || !vm.input.type || invalidYear || include.status || rangeIntersectStart.status || rangeIntersectEnded.status)"><i class="fa fa-sticky-note-o"></i></button>
	                            <button ng-if="vm.hasSubmit" class="btn btn-primary" ng-click="vm.submit()" ng-disabled="validated && (SemesterForm.$invalid || !vm.input.type || invalidYear || include.status || rangeIntersectStart.status || rangeIntersectEnded.status)"><i class="fa fa-save"></i></button>
	                        </div>
	                    </div>
	                </div>
	         
				</form>
            </div>
        </div>
    </div>
    

<json-formatter ng-if="admin.debug || user.debug" json="vm.input" open="1"></json-formatter>

